# Using S3 compatible object storage in PHP

## Installing required SDKs

* Use [Composer](https://getcomposer.org) as a dependency manager for PHP. It's already globally pre-installed in each Zerops PHP Service, and you can install it also in your local development environment.

* Create the `composer.json` file with the preferable version of [AWS SDK for PHP](https://aws.amazon.com/sdk-for-php) (current latest version is **v3.188**) and place it in the application code root directory.

```json
{
   "require": {
      "aws/aws-sdk-php": "3.188"
   }
}
```

* Suppose you run ==`composer install`== manually in your local development environment, the `composer.lock` file is created beside the `composer.json` file.

* Place the line ==`composer install`== to the [run](/documentation/build/build-config.html#run) section of the [zerops.yml](/documentation/build/build-config.html) configuration file necessary for building your application.

```yaml
runs:
  - ...
  - composer install
  - ...
```

* The composer install process downloads necessary files and creates a new subdirectory `aws\aws-sdk-php` in the `vendor` directory placed directly in the application code root.

<!-- markdownlint-disable DOCSMD004 -->
::: info Where following code snippets are used
Suppose the code is used in a php file located in a [document root](/documentation/services/runtimes/php.html#setting-php-apache-document-root) subdirectory (for example, ==**`public`**== ) placed directly in the [application code root](/documentation/services/runtimes/php.html#application-code-root-and-document-root).
:::
<!-- markdownlint-enable DOCSMD004 -->

## How to get access credentials

<!-- markdownlint-disable DOCSMD004 -->
::: warning Temporary solution
At this time, environment variables generated by Zerops Object Storage Services are **not available** in other services. For this reason, it is necessary to use their `Access Key Id` and `Secret Access Key` values by manually copying them from the [Storage access details](/documentation/services/storage/s3.html#from-local-development-environment) card of the service detail. The code line for getting ==**$credentials**== would be then:

```php
$credentials = new Credentials('0LW7E_BUT-yKmmEcyf3dzQ', '4Gn_7jWqMcqUDs8n');
```

This limitation is temporary only and will be removed as soon as possible.
:::
<!-- markdownlint-enable DOCSMD004 -->

Using the following code, you will get a variable ==`$credentials`== containing an object used later for authentication when creating buckets and their content.

Assume further that the code is associated with access to the Zerops Object Storage Service, whose [object storage name](/documentation/services/storage/s3.html#object-storage-name) was chosen as the ==**`store`**== . Necessary [Storage access details](/documentation/services/storage/s3.html#from-local-development-environment) values **Access Key Id** and **Secret Access Key** are taken from [environment variables](/documentation/environment-variables/how-to-access.html) then.

<!-- markdownlint-disable DOCSMD004 -->
::: info
The unique generated id of the created Zerops Object Storage Service instance is used as the value of the **accessKeyId** environment variable. The value of **secretAccessKey** is a 16-characters random string.
:::
<!-- markdownlint-enable DOCSMD004 -->

```php
<?php
  // Include the SDK using the Composer auto-loader.
  require '../vendor/autoload.php';

  // Import relevant SDK classes.
  use Aws\S3\S3Client;
  use Aws\Credentials\Credentials;
  use Aws\Exception\AwsException;

  // Object storage name.
  $objetStorageName = 'store';
  // Relevant environment variable names.
  $accessKeyId = 'accessKeyId';
  $secretAccessKey = 'secretAccessKey';
  // Get an object with credentials.
  $credentials = new Credentials(
    getenv("{$objetStorageName}_${$accessKeyId}"),
    getenv("{$objetStorageName}_${secretAccessKey}")
  );
?>
```

## Creating an object storage bucket


